# oci_vars.j2 Template Documentation

## Purpose

Emits essential networking and compartment variables for Oracle Cloud Infrastructure (OCI) automation and playbook chaining. This is the central config "glue" between infrastructure/app provisioning and runtime/cluster setup.

## How the Template is Used

- Rendered by provisioning playbooks (e.g., create_instance.yml).
- Consumed via `include_vars: oci_vars.yml` by other playbooks to leverage the correct compartment, VCN, subnet, and optional VLAN details.
- Ensures environment-specific values are always up to date without manual edits.

## Key Variables & Substitutions

- `my_compartment_id`: The OCID of the OCI compartment to deploy infra into.
- `my_vcn_id`: The OCID of the VCN for your environment.
- `my_subnet_id`: The OCID of the K8s subnet.
- `my_subnet_domain_name`: FQDN for K8s subnet DNS.
- `my_vlan_id`: The OCID of the created VLAN (only if use_vlan is set).
- Jinja2 conditionals to include VLAN ID only if VLAN is enabled.

## Rendered Example

```yaml
my_compartment_id: ocid1.compartment.oc1..aaaa
my_vcn_id: ocid1.vcn.oc1..bbbb
my_subnet_id: ocid1.subnet.oc1..cccc
my_subnet_domain_name: subnet1.vcn1.oraclevcn.com
my_vlan_id: ocid1.vlan.oc1..dddd     # only if VLAN enabled
```

## Special Logic

- Conditional inclusion of my_vlan_id based on inventory/vars (Jinja2 `{% if use_vlan %}`).
- All variable values are auto-populated by prior provisioning stepsâ€”no hardcoding.

## Related Files

- Generated by: create_instance.yml and/or network provisioning playbooks.
- Consumed by: preconfig_oci_ccm.yml, cluster creation, CCM, LB, and most downstream automation logic.
