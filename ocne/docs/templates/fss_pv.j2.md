# fss_pv.j2 Template Documentation

## Purpose

Defines a Kubernetes PersistentVolume (PV) resource for binding to Oracle Cloud Infrastructure File Storage Service (OCI FSS) using the CSI driver.

## How the Template is Used

- Rendered by fss_deployments.yml, provided with live FSS IDs and IPs.
- Responsible for provisioning a PV resource in the cluster, which is then claimable by persistent workloads via corresponding PVCs.

## Key Variables & Substitutions

- `file_system_id`: The OCID of the created FSS file system.
- `mount_target_ip_address`: IP address of the FSS mount target.
- `export_path`: NFS export path; rendered as part of the OCI FSS setup.
- These are set/generated by create_fss.yml and passed in via fss_vars.yml.

## Rendered Example

```yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: fss-pv
spec:
  capacity:
    storage: 50Gi
  volumeMode: Filesystem
  accessModes:
    - ReadWriteMany
  persistentVolumeReclaimPolicy: Retain
  csi:
    driver: fss.csi.oraclecloud.com
    volumeHandle: ocid1.filesystem.oc1..xx:10.0.0.99:/fss-ocne
```

## Special Logic

- Leverages Jinja2 variable substitutions for dynamic infrastructure.
- CSI driver string hard-coded for OCI FSS.

## Related Files

- Rendered by: fss_deployments.yml.
- Consumed together with fss_pvc.j2 and fss_pod.j2.
- Relies on and related to file outputs from create_fss.yml (fss_vars.yml).
